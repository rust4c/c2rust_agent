# 函数转换上下文指导

## 函数转换要求

### 接口兼容性

1. 保持与调用者的接口兼容性
2. 正确处理被调用函数的依赖关系
3. 使用适当的 Rust 类型和错误处理机制

### 调用关系处理

- 确保函数签名与调用者期望一致
- 处理好参数传递（值传递 vs 引用传递）
- 考虑函数的生命周期和所有权转移

### 错误传播

- 使用 `Result<T, E>` 进行错误传播
- 使用 `?` 运算符简化错误处理
- 在必要时使用 `unwrap()` 但要添加注释说明

### 性能考虑

- 避免不必要的克隆和复制
- 合理使用引用减少内存开销
- 关键路径避免堆分配

## 输出格式

请按照标准 JSON 格式返回转换结果，包含原始代码、转换后代码、关键变更点和潜在警告。

```
{
  "original": "原始C代码",
  "rust_code": "转换后的Rust代码",
  "key_changes": ["关键变更点列表"],
  "warnings": ["潜在问题警告"]
}
```
