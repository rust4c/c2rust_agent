import { Button, TextEdit, LineEdit, StandardButton } from "std-widgets.slint";

export component PanicDialog inherits Dialog {
    title: "发生错误";
    in-out property <string> message;

    VerticalLayout {
        padding: 12px;
        spacing: 8px;
        Text { text: "程序发生异常 (panic)"; font-weight: 600; }
        TextEdit { text <=> root.message; wrap: word-wrap; read-only: true; }
    }
    StandardButton { kind: ok; }
}

export component MainWindow inherits Window {
    width: 640px;
    height: 420px;
    title: "C2Rust Agent UI (Slint)";

    in-out property <string> input_dir;
    in-out property <string> output_dir;
    in-out property <string> log_text;
    callback analyze_click();
    callback preprocess_click();
    callback translate_click();

    VerticalLayout {
        spacing: 12px;
        Text { text: "C2Rust Agent"; font-size: 22px; }

        HorizontalLayout {
            spacing: 8px;
            Text { text: "输入目录:"; }
            LineEdit { text <=> root.input_dir; horizontal-stretch: 1; }
        }

        HorizontalLayout {
            spacing: 8px;
            Text { text: "输出目录:"; }
            LineEdit { text <=> root.output_dir; horizontal-stretch: 1; }
        }

        HorizontalLayout {
            spacing: 8px;
            Button { text: "分析"; clicked => { root.analyze_click(); } }
            Button { text: "预处理"; clicked => { root.preprocess_click(); } }
            Button { text: "转换"; clicked => { root.translate_click(); } }
        }

        Rectangle {
            border-radius: 6px;
            VerticalLayout {
                padding: 6px;
                Text { text: "日志"; }
                TextEdit { text <=> root.log_text; wrap: word-wrap; read-only: true; }
            }
        }
    }
}
